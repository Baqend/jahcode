<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<script type="text/javascript" src="class.js"></script>
<script type="text/javascript" src="EventHandler.js"></script>
<script type="text/javascript">
var start = new Date().getTime();
var TraitA = Trait.inherit({
	a: function() {
        return " Call a from TraitA"; 
    },
    
    d: function(sum) {
        return sum + 20;
    }
});

var TraitB = Trait.inherit({
	a: function() {
        return " Call a from TraitB " + this.superCall(); 
    },
    
    d: function(sum) {
        return this.superCall(sum) + 20;
    }
});

var MyClassA = Object.inherit(TraitA, TraitB, {
	a: function() {
		return " Call a from MyClassA " + this.superCall(); 
	}
});

var TraitC = TraitB.inherit({
    a: function() {
        return " Call a from TraitC " + this.superCall(); 
    },
    
    c: function(sum) {
        return sum + 20;
    }
});

var MyClassB = MyClassA.inherit(TraitA, TraitB, TraitC, {
    a: function() {
        return " Call a from MyClassB " + this.superCall(); 
    },
    
    b: function() {
        return 'test';
    }
});

console.log('init: ' + (new Date().getTime() - start));

var objs = new Array(100000);
start = new Date().getTime();
for (var i = 0; i < 1000000; ++i) {
    objs[i] = new MyClassB();
}

console.log('create: ' + (new Date().getTime() - start));

start = new Date().getTime();
for (var i = 0; i < 100000; ++i) {
	objs[i].a();
}

console.log('a: ' + (new Date().getTime() - start));

start = new Date().getTime();
for (var i = 0; i < 1000000; ++i) {
	objs[i].b();
}

console.log('b: ' + (new Date().getTime() - start));

start = new Date().getTime();
var sum = 0;
for (var i = 0; i < 1000000; ++i) {
    sum = objs[i].c(sum);
}

console.log('c: ' + sum + ' ' + (new Date().getTime() - start));

start = new Date().getTime();
var sum2 = 0;
for (var i = 0; i < 100000; ++i) {
    sum2 = objs[i].d(sum);
}

console.log('d: ' + sum2 + ' ' + (new Date().getTime() - start));

start = new Date().getTime();
var result = true;
for (var i = 0; i < 100000; ++i) {
    result &= TraitA(objs[i]) != null; 
}

console.log('isA: ' + result + ' ' + (new Date().getTime() - start));

var MyEventHandlerClass = Object.inherit(EventHandler, {
	_bla: 4,
	huhu: 'muh',
	
	initialize: function() {
		this.huhu = 3;
		
		for (name in this.on)
			  window.addEventListener(name, this.on[name]);
	},
	doSomethingOnClick: function() {
        alert(this.bla);
	},
	on: {
        click: function() {
            this.doSomethingOnClick();
        },
        mousemove: function(e) {
            this.bla = e.x;
        }
    }
});

var el = new MyEventHandlerClass()

</script>
<title>Insert title here</title>
</head>
<body>

</body>
</html>